(window["webpackJsonpguodada-react-blog"]=window["webpackJsonpguodada-react-blog"]||[]).push([[2],{694:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var n=a(0),c=a(60);function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=Object(c.b)();Object(n.useEffect)((function(){return t.emit("breadcrumbList",e),function(){t.emit("breadcrumbList",[])}}),[])}},719:function(e,t,a){},728:function(e,t,a){},738:function(e,t,a){"use strict";a.r(t);a(364);var n=a(298),c=(a(89),a(26)),r=(a(113),a(54)),i=(a(166),a(99)),l=(a(218),a(75)),u=a(21),s=a(0),o=a.n(s),f=a(29),m=(a(719),a(45)),b=a(720),d=a.n(b);a(727),a(728);var g=function(e){return o.a.createElement(d.a,{theme:"snow",value:e.value,onChange:e.onChange,height:"450"})},p=(a(64),a(3)),h=(a(126),a(42)),E=a(128),O=(a(164),a(71)),j=O.a.CheckableTag;var v=function(e){var t=e.list,a=e.setList,n=Object(s.useState)(!1),c=Object(u.a)(n,2),i=c[0],l=c[1],f=Object(s.useState)(""),m=Object(u.a)(f,2),b=m[0],d=m[1],g=e.selectedList,v=e.setSelectedList,L=null;function y(){b&&!t.find((function(e){return e===b}))&&(a([].concat(Object(E.a)(t),[b])),v([].concat(Object(E.a)(g),[b])),d("")),l(!1)}return o.a.createElement(o.a.Fragment,null,t.map((function(e,n){var c=e.length>20,r=o.a.createElement(j,{key:e,closable:"true",onClose:function(){return function(e){var n=t.filter((function(t){return t!==e}));a(n)}(e)},checked:g.includes(e),onChange:function(t){return function(e,t){var a=t?[].concat(Object(E.a)(g),[e]):g.filter((function(t){return t!==e}));v(a)}(e,t)},color:"#1890ff"},c?"".concat(e.slice(0,20),"..."):e);return c?o.a.createElement(h.a,{title:e,key:e},r):r})),o.a.createElement(r.a,{style:{width:78,display:i?"inline":"none"},ref:function(e){L=e},type:"text",size:"small",value:b,onChange:function(e){return d(e.target.value)},onBlur:y,onPressEnter:y}),!i&&o.a.createElement(O.a,{onClick:function(){l(!0),L&&L.focus()},style:{background:"#fff",borderStyle:"dashed"}},o.a.createElement(p.a,{type:"plus"})," New Tag"))},L=a(694);t.default=function(e){var t=Object(f.useSelector)((function(e){return{tagList:e.article.tagList,categoryList:e.article.categoryList,authorId:e.user.userId}})),a=Object(s.useState)(""),b=Object(u.a)(a,2),d=b[0],p=b[1],h=Object(s.useState)(""),E=Object(u.a)(h,2),O=E[0],j=E[1],y=Object(s.useState)([]),S=Object(u.a)(y,2),k=S[0],w=S[1],C=Object(s.useState)([]),N=Object(u.a)(C,2),I=N[0],x=N[1],z=Object(s.useState)([]),J=Object(u.a)(z,2),T=J[0],q=J[1],B=Object(s.useState)([]),F=Object(u.a)(B,2),P=F[0],A=F[1],D=parseInt(e.match.params.id);return Object(L.a)([{link:"/admin/article/manager",name:"\u6587\u7ae0\u7ba1\u7406"},D?"\u7f16\u8f91\u6587\u7ae0":"\u65b0\u589e\u6587\u7ae0"]),Object(s.useEffect)((function(){var e;D&&(e=D,m.a.get("/article/".concat(e,"?type=0")).then((function(e){j(e.title),p(e.content);var t=e.tags.map((function(e){return e.name})),a=e.categories.map((function(e){return e.name}));w(t),x(a),q(t),A(a)})))}),[e.match.params]),Object(s.useEffect)((function(){if(!D){var e=t.tagList.map((function(e){return e.name})).slice(0,10),a=t.categoryList.map((function(e){return e.name})).slice(0,10);w(e),x(a),e[0]&&q([e[0]]),a[0]&&A([a[0]])}}),[t.tagList,t.categoryList]),o.a.createElement("div",{className:"admin-edit-article"},o.a.createElement("ul",{className:"form-list"},o.a.createElement("li",null,o.a.createElement("span",{className:"label"},"\u6807\u9898\uff1a"),o.a.createElement("span",{style:{flex:1}},o.a.createElement(r.a,{placeholder:"\u8bf7\u8f93\u5165\u6587\u7ae0\u6807\u9898",className:"title-input",name:"title",value:O,onChange:function(e){return j(e.target.value)}}))),o.a.createElement("li",null,o.a.createElement("span",{className:"label"},"\u6807\u7b7e\uff1a"),o.a.createElement("span",null,o.a.createElement(v,{list:k,setList:w,selectedList:T,setSelectedList:q}))),o.a.createElement("li",null,o.a.createElement("span",{className:"label"},"\u5206\u7c7b\uff1a"),o.a.createElement("span",null,o.a.createElement(v,{list:I,setList:x,selectedList:P,setSelectedList:A})))),o.a.createElement(g,{value:d,onChange:p}),o.a.createElement(c.a,{type:"primary",shape:"circle",size:"large",disabled:!O,className:"action-icon",title:D?"\u66f4\u65b0":"\u65b0\u589e",icon:D?"file-sync":"plus",onClick:function(){D?m.a.put("/article/".concat(D),{title:O,content:d,tags:T,categories:P}).then((function(){l.a.success("\u66f4\u65b0\u6210\u529f")})):function(){if(!O)return l.a.warning("\u6807\u9898\u4e0d\u80fd\u4e3a\u7a7a\uff01");m.a.post("/article",{title:O,content:d,tagList:T,categoryList:P,authorId:t.authorId}).then((function(t){i.a.confirm({title:"\u6587\u7ae0\u521b\u5efa\u6210\u529f\uff01\u662f\u5426\u7acb\u5373\u67e5\u770b\uff1f",onOk:function(){return e.history.push("/article/".concat(t.id))}})}))}()}}),o.a.createElement(n.a,{target:function(){return document.querySelector(".admin-content-wrap")}}))}}}]);